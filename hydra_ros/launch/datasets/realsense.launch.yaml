---
launch:
  - arg: {name: labelspace_name, default: realsense_d455}
  - arg: {name: zed_rgb_topic, default: /camera/camera/color/image_raw}
  - arg: {name: zed_depth_topic, default: /camera/camera/aligned_depth_to_color/image_raw}
  - arg: {name: zed_camera_info_topic, default: /realsense/camera_info}
  - arg: {name: use_sim_time, default: 'false'}
  - arg: {name: dataset, default: realsense_d455}
  
  # hydra
  - set_remap: {from: hydra/input/frontleft/rgb/image_raw, to: $(var zed_rgb_topic)}
  - set_remap: {from: hydra/input/frontleft/depth_registered/image_rect, to: $(var zed_depth_topic)}
  - set_remap: {from: hydra/input/frontleft/rgb/camera_info, to: $(var zed_camera_info_topic)}
  - set_remap: {from: hydra/input/frontleft/semantic/image_raw, to: /realsense/semantic_segmentation_mask}
  - node:
      pkg: hydra_ros
      exec: hydra_ros_node
      name: hydra
      param:
        - {name: use_sim_time, value: $(var use_sim_time)}
      args: >-
        --config-utilities-file $(find-pkg-share hydra_ros)/config/datasets/$(var dataset).yaml
        --config-utilities-file $(find-pkg-share hydra)/config/label_spaces/$(var labelspace_name)_label_space.yaml
        --config-utilities-yaml {print_missing: false, show_config: true, verbosity: 2}
        --config-utilities-yaml {log_path: $(env HOME)/.hydra/$(var dataset)}
        --config-utilities-yaml {glog_level: 0, glog_verbosity: 0}

  # hydra visualizer
  - set_remap: {from: hydra_visualizer/dsg, to: hydra/backend/dsg}
  - include:
      file: $(find-pkg-share hydra_visualizer)/launch/streaming_visualizer.launch.yaml
      arg:
        - {name: visualizer_frame, value: map}
        - {name: rviz_path, value: $(find-pkg-share hydra_visualizer)/rviz/realsense_d455.rviz}
